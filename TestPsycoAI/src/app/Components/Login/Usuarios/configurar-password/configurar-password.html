@if(accesoDenegado) {
  <app-acceso-denegado></app-acceso-denegado>
} @else {
<div class="login-container d-flex justify-content-center align-items-center" style="min-height: 70vh;">
    <div class="login-card shadow-lg p-5 rounded" style="background: #fff; max-width: 600px; width: 100%; ">
        <h1 class="text-center mb-5" style="color: #2575fc;">Cambio de Credenciales</h1>
        <!-- Información del usuario -->
        <div class="mb-4 text-center">
            <h4>Bienvenido {{ sesion?.usuario }}, aquí puedes cambiar tus credenciales</h4>
        </div>
    
        <!-- Formulario para cambiar la contraseña -->
        <form (ngSubmit)="cambiarPassword()">
            <div class="mb-4 position-relative">
                <label for="password" class="form-label">Nueva Contraseña</label>
                <div class="input-group">
                    <input [type]="showPassword ? 'text' : 'password'" 
                        class="form-control"
                        id="password" name="password" 
                        placeholder="Ingresa tu nueva contraseña" 
                        style="border-radius: 8px;" 
                        [(ngModel)]="usuario.password"
                        pattern="^(?=.*[A-Z])(?=.*\d).{6,}$"
                        required
                        #passwordInput="ngModel"
                        title="La contraseña debe tener al menos 6 caracteres, una letra mayúscula y un número."
                    >
                    <button type="button" class="btn btn-outline-secondary btn-sm"
                        (click)="showPassword = !showPassword" tabindex="-1">
                        <i class="fa" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
                    </button>
                </div>
                <div *ngIf="passwordInput.invalid && passwordInput.touched" class="text-danger">
                    <small *ngIf="passwordInput.errors?.['required']">La contraseña es obligatoria.</small>
                    <small *ngIf="passwordInput.errors?.['pattern']">Formato inválido.</small>  
                </div>
            </div>
            <div class="mb-4">
                <label for="confirmPassword" class="form-label">Confirmar Contraseña</label>
                <input type="password"
                 class="form-control" 
                 id="confirmPassword" 
                 name="confirmPassword" 
                 placeholder="Confirma tu nueva contraseña" 
                 style="border-radius: 8px;" 
                 [(ngModel)]="confirmPassword"
                    #confirmPasswordInput="ngModel"
                    [pattern]="usuario.password || ''"
                    title="Las contraseñas deben coincidir."
                    required
                >
                <div *ngIf="confirmPasswordInput.invalid && confirmPasswordInput.touched" class="text-danger">
                    <small *ngIf="confirmPasswordInput.errors?.['required']">Debe confirmar la contraseña.</small>
                    <small *ngIf="confirmPasswordInput.errors?.['pattern']">Las contraseñas no coinciden.</small>
                </div>
             
            </div>
           <div class="form-check mt-5 mb-4 d-flex justify-content-center">
                <button type="submit" class="btn btn-primary w-50 mx-auto d-block">
                    <i class="fas fa-key"></i> Cambiar Contraseña
                </button>
            </div>
            
        </form>
    </div>
</div>
}